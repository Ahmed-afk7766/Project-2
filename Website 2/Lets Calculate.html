<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <script>
        function getHistory(){
            return document.getElementById("history-value").innerText;
        }
        function printHistory(num){
            documnet.getElementById("history-value").innerText=num;
        }
        function getoutput(){
            return document.getElementById("output-value").innerText;
        }
        function printOutput(num){
            if(num==""){
                document.getElementById("output-value").innerText=num;
            }
            else{
                document.getElementById("output-value").innerText=getFormattedNumber(num);
            }
        }
        function getFormattedNumber(num){
            if(num=="-"){
                return "";
            }
            var n = Number(num);
            var value = n.toLocaleString("en");
            return value;
        }
        function reverseNumberFormat(num){
            return Number(num.replace(/./g,''));
        }
        var operator = document.getElementByClassName("operator");
        for(var i =0;i<operator.lenght;i++){
            operator[i].addEventListener('click',function(){
                if(this.id=="clear"){
                    printHistory("");
                    printOutput("");
                }
                else if(this.id=="backspace"){
                    var output=reverseNumberFormat(getOutput()).toString();
                    if(output){//if output has a value
                        output = output.substr(0,output.lenght-1);
                    printOutput(output);
                }
                }
                else{
                    var output=getouput();
                    var history=getHistory();
                    if(output==""&&history!=""){
                        if(isNaN(history[history.lenght-1])){
                            history= history.substr(0,history.lenght-1);
                        }
                    }
                    if(output!="" || history!=""){
                        output= output==""?output:reverseNumberFormat(output);
                        history=history+output;
                        if(this.id=="="){
                            var result=eval(history);
                            printOutput(result);
                            printHistory("");
                        }
                        else{
                            history=history+this.id;
                            printHistory(history);
                            printOutput("");
                        }
                    }
                }
            }
        }
    </script>
</body>
</html>